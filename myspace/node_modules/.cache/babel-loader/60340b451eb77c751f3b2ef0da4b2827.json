{"ast":null,"code":"import { createElementVNode as _createElementVNode, vModelText as _vModelText, withDirectives as _withDirectives, toDisplayString as _toDisplayString, withModifiers as _withModifiers, resolveComponent as _resolveComponent, withCtx as _withCtx, openBlock as _openBlock, createBlock as _createBlock, pushScopeId as _pushScopeId, popScopeId as _popScopeId } from \"vue\";\n\nconst _withScopeId = n => (_pushScopeId(\"data-v-7baf7e2a\"), n = n(), _popScopeId(), n);\n\nconst _hoisted_1 = {\n  class: \"row justify-content-md-center\"\n};\nconst _hoisted_2 = {\n  class: \"col-3\"\n};\nconst _hoisted_3 = {\n  class: \"mb-3\"\n};\n\nconst _hoisted_4 = /*#__PURE__*/_withScopeId(() => /*#__PURE__*/_createElementVNode(\"label\", {\n  for: \"username\",\n  class: \"form-label\"\n}, \"用户名\", -1));\n\nconst _hoisted_5 = {\n  class: \"mb-3\"\n};\n\nconst _hoisted_6 = /*#__PURE__*/_withScopeId(() => /*#__PURE__*/_createElementVNode(\"label\", {\n  for: \"password\",\n  class: \"form-label\"\n}, \"密码\", -1));\n\nconst _hoisted_7 = {\n  class: \"mb-3\"\n};\n\nconst _hoisted_8 = /*#__PURE__*/_withScopeId(() => /*#__PURE__*/_createElementVNode(\"label\", {\n  for: \"password_confirm\",\n  class: \"form-label\"\n}, \"确认密码\", -1));\n\nconst _hoisted_9 = {\n  class: \"error-message\"\n};\n\nconst _hoisted_10 = /*#__PURE__*/_withScopeId(() => /*#__PURE__*/_createElementVNode(\"button\", {\n  type: \"submit\",\n  class: \"btn btn-primary\"\n}, \"注册\", -1));\n\nexport function render(_ctx, _cache, $props, $setup, $data, $options) {\n  const _component_ContentBase = _resolveComponent(\"ContentBase\");\n\n  return _openBlock(), _createBlock(_component_ContentBase, null, {\n    default: _withCtx(() => [_createElementVNode(\"div\", _hoisted_1, [_createElementVNode(\"div\", _hoisted_2, [_createElementVNode(\"form\", {\n      onSubmit: _cache[3] || (_cache[3] = _withModifiers((...args) => $setup.register && $setup.register(...args), [\"prevent\"]))\n    }, [_createElementVNode(\"div\", _hoisted_3, [_hoisted_4, _withDirectives(_createElementVNode(\"input\", {\n      \"onUpdate:modelValue\": _cache[0] || (_cache[0] = $event => $setup.username = $event),\n      type: \"text\",\n      class: \"form-control\",\n      id: \"username\"\n    }, null, 512), [[_vModelText, $setup.username]])]), _createElementVNode(\"div\", _hoisted_5, [_hoisted_6, _withDirectives(_createElementVNode(\"input\", {\n      \"onUpdate:modelValue\": _cache[1] || (_cache[1] = $event => $setup.password = $event),\n      type: \"password\",\n      class: \"form-control\",\n      id: \"password\"\n    }, null, 512), [[_vModelText, $setup.password]])]), _createElementVNode(\"div\", _hoisted_7, [_hoisted_8, _withDirectives(_createElementVNode(\"input\", {\n      \"onUpdate:modelValue\": _cache[2] || (_cache[2] = $event => $setup.password_confirm = $event),\n      type: \"password\",\n      class: \"form-control\",\n      id: \"password_confirm\"\n    }, null, 512), [[_vModelText, $setup.password_confirm]])]), _createElementVNode(\"div\", _hoisted_9, _toDisplayString($setup.error_message), 1), _hoisted_10], 32)])])]),\n    _: 1\n  });\n}","map":{"version":3,"mappings":";;;;;EAGOA,KAAK,EAAC;;;EACJA,KAAK,EAAC;;;EAERA,KAAK,EAAC;;;gEACTC,oBAAoD,OAApD,EAAoD;EAA7CC,GAAG,EAAC,UAAyC;EAA9BF,KAAK,EAAC;AAAwB,CAApD,EAAyC,KAAzC,EAA4C,EAA5C;;;EAGGA,KAAK,EAAC;;;gEACTC,oBAAmD,OAAnD,EAAmD;EAA5CC,GAAG,EAAC,UAAwC;EAA7BF,KAAK,EAAC;AAAuB,CAAnD,EAAyC,IAAzC,EAA2C,EAA3C;;;EAGGA,KAAK,EAAC;;;gEACTC,oBAA6D,OAA7D,EAA6D;EAAtDC,GAAG,EAAC,kBAAkD;EAA/BF,KAAK,EAAC;AAAyB,CAA7D,EAAiD,MAAjD,EAAqD,EAArD;;;EAGGA,KAAK,EAAC;;;iEACXC,oBAAyD,QAAzD,EAAyD;EAAjDE,IAAI,EAAC,QAA4C;EAAnCH,KAAK,EAAC;AAA6B,CAAzD,EAA8C,IAA9C,EAAgD,EAAhD;;;;;uBAjBFI,aAsBcC,sBAtBd,EAsBc,IAtBd,EAsBc;sBArBZ,MAmBM,CAnBNJ,oBAmBM,KAnBN,cAmBM,CAlBJA,oBAiBM,KAjBN,cAiBM,CAhBJA,oBAeC,MAfD,EAeC;MAfMK,QAAM,wDAAUC,2CAAV,EAAkB,WAAlB;IAeZ,CAfD,GACJN,oBAGM,KAHN,cAGM,CAFJO,UAEI,kBADJP,oBAAyE,OAAzE,EAAyE;iEAAzDM,kBAAQE,OAAiD;MAA/CN,IAAI,EAAC,MAA0C;MAAnCH,KAAK,EAAC,cAA6B;MAAdU,EAAE,EAAC;IAAW,CAAzE,6BAAgBH,kBACZ,CAHN,GAIAN,oBAGM,KAHN,cAGM,CAFJU,UAEI,kBADJV,oBAA6E,OAA7E,EAA6E;iEAA7DM,kBAAQE,OAAqD;MAAnDN,IAAI,EAAC,UAA8C;MAAnCH,KAAK,EAAC,cAA6B;MAAdU,EAAE,EAAC;IAAW,CAA7E,6BAAgBH,kBACZ,CAHN,GAIAN,oBAGM,KAHN,cAGM,CAFJW,UAEI,kBADJX,oBAA6F,OAA7F,EAA6F;iEAA7EM,0BAAgBE,OAA6D;MAA3DN,IAAI,EAAC,UAAsD;MAA3CH,KAAK,EAAC,cAAqC;MAAtBU,EAAE,EAAC;IAAmB,CAA7F,6BAAgBH,0BACZ,CAHN,GAIAN,oBAAkD,KAAlD,cAAkDY,iBAArBN,oBAAqB,CAAlD,EAA0C,CAA1C,GACAO,YAdI,KAgBI,CAjBN,CAkBI,CAnBN,CAmBM,EAEM;;EAAA,CAtBd","names":["class","_createElementVNode","for","type","_createBlock","_component_ContentBase","onSubmit","$setup","_hoisted_4","$event","id","_hoisted_6","_hoisted_8","_toDisplayString","_hoisted_10"],"sourceRoot":"","sources":["C:\\Users\\DELL\\Desktop\\chess\\myspace\\src\\views\\RegisterView.vue"],"sourcesContent":["<template>\r\n \r\n<ContentBase>\r\n  <div class=\"row justify-content-md-center\">\r\n    <div class=\"col-3\">\r\n      <form @submit.prevent=\"register\">\r\n  <div class=\"mb-3\">\r\n    <label for=\"username\" class=\"form-label\">用户名</label>\r\n    <input v-model=\"username\" type=\"text\" class=\"form-control\" id=\"username\">\r\n  </div>\r\n  <div class=\"mb-3\">\r\n    <label for=\"password\" class=\"form-label\">密码</label>\r\n    <input v-model=\"password\" type=\"password\" class=\"form-control\" id=\"password\">\r\n  </div>\r\n  <div class=\"mb-3\">\r\n    <label for=\"password_confirm\" class=\"form-label\">确认密码</label>\r\n    <input v-model=\"password_confirm\" type=\"password\" class=\"form-control\" id=\"password_confirm\">\r\n  </div>\r\n  <div class=\"error-message\">{{error_message}}</div>\r\n  <button type=\"submit\" class=\"btn btn-primary\">注册</button>\r\n</form>\r\n    </div>\r\n  </div>\r\n\r\n</ContentBase>\r\n\r\n</template>\r\n\r\n<script>\r\n\r\nimport ContentBase from '../components/ContentBase';\r\nimport { ref} from 'vue';\r\nimport { useStore } from 'vuex';\r\nimport router from '@/router/index';\r\nimport $ from 'jquery';\r\n\r\n\r\nexport default {\r\n  name: 'RegisterView',\r\n  components: {\r\n    ContentBase,\r\n  },\r\n  setup(){\r\n\r\n    const store=useStore();\r\n    let username=ref('');\r\n    let password=ref('');\r\n    let password_confirm=ref('')\r\n    let error_message=ref('');\r\n    const register =()=>{\r\n      error_message.value=\"\";\r\n      console.log(store,router);\r\n      //console.log(username.value,password.value,password_confirm.value);\r\n      $.ajax({\r\n        url:\"https://app165.acapp.acwing.com.cn/myspace/user/\",\r\n        type:\"POST\",\r\n        data:{\r\n          username:username.value,\r\n          password:password.value,\r\n          password_confirm:password_confirm.value,\r\n\r\n        },\r\n        success(resp){\r\n         // console.log(resp);\r\n         \r\n          //注册成功之后可以直接登录\r\n          if(resp.result===\"success\"){\r\n             store.dispatch(\"login\",{\r\n             username:username.value,\r\n             password:password.value,\r\n            success(){\r\n              //console.log(\"success\");\r\n              router.push({name:'userlist'});\r\n            },error(){\r\n              //console.log(\"failed\");\r\n              error_message.value=\"系统异常，请稍后重试\";\r\n             }\r\n          });\r\n\r\n          }else{\r\n             error_message.value=resp.result;//注册失败才显示信息\r\n          }\r\n          \r\n        },error(){\r\n          //error_message.value=resp;\r\n        }\r\n\r\n      });\r\n   \r\n    };\r\n    \r\n    return{\r\n      username,\r\n      password,\r\n      password_confirm,\r\n      error_message,\r\n      register,\r\n    }\r\n  }\r\n\r\n}\r\n</script>\r\n<style scoped>\r\nbutton{\r\n  width:100%\r\n}\r\n.error-message{\r\n  color:red;\r\n  font-size:17px;\r\n  padding:2px,2px;\r\n}\r\n</style>"]},"metadata":{},"sourceType":"module"}