{"ast":null,"code":"import { computed } from 'vue';\nimport { useStore } from 'vuex';\nimport $ from 'jquery';\nexport default {\n  name: 'UserProfilePosts',\n  props: {\n    posts: {\n      type: Object,\n      required: true\n    },\n    user: {\n      type: Object,\n      required: true\n    }\n  },\n\n  setup(props, context) {\n    const store = useStore();\n    let is_me = computed(() => store.state.user.id === props.user.id);\n    /*const change_a_post=(post_id)=>{\r\n        $.ajax({\r\n            url:\"https://app165.acapp.acwing.com.cn/myspace/post/\",\r\n            type:\"PUT\",\r\n            data:{\r\n                post_id,\r\n            },\r\n            headers:{\r\n                'Authorization':\"Bearer \" +store.state.user.access,\r\n            },\r\n            success(resp){\r\n                console.log()\r\n            }\r\n          });\r\n    }*/\n    //删除帖子\n\n    const delete_a_post = post_id => {\n      $.ajax({\n        url: \"https://app165.acapp.acwing.com.cn/myspace/post/\",\n        type: \"DELETE\",\n        data: {\n          post_id\n        },\n        headers: {\n          'Authorization': 'Bearer ' + store.state.user.access //身份验证\n\n        },\n\n        success(resp) {\n          if (resp.result === \"success\") {\n            //后端操作成功，则前端显示实现真正删掉\n            context.emit('delete_a_post', post_id);\n          } //console.log(resp);\n\n        },\n\n        error() {//console.log(\"failed\");\n        }\n\n      });\n    };\n\n    return {\n      is_me,\n      delete_a_post //change_a_post,\n\n    };\n  }\n\n};","map":{"version":3,"mappings":"AAkBA,SAAQA,QAAR,QAAuB,KAAvB;AACA,SAAQC,QAAR,QAAuB,MAAvB;AACA,OAAOC,CAAP,MAAc,QAAd;AAEA,eAAc;EACVC,IAAI,EAAC,kBADK;EAEVC,KAAK,EAAC;IACFC,KAAK,EAAC;MACFC,IAAI,EAACC,MADH;MAEFC,QAAQ,EAAC;IAFP,CADJ;IAMFC,IAAI,EAAC;MACAH,IAAI,EAACC,MADL;MAEDC,QAAQ,EAAC;IAFR;EANH,CAFI;;EAaVE,KAAK,CAACN,KAAD,EAAOO,OAAP,EAAe;IAChB,MAAMC,KAAK,GAACX,QAAQ,EAApB;IACA,IAAIY,KAAK,GAACb,QAAQ,CAAC,MAAIY,KAAK,CAACE,KAAN,CAAYL,IAAZ,CAAiBM,EAAjB,KAAsBX,KAAK,CAACK,IAAN,CAAWM,EAAtC,CAAlB;IACA;;;;;;;;;;;;;;;IAgBA;;IACA,MAAMC,aAAa,GAAEC,OAAD,IAAW;MAC3Bf,CAAC,CAACgB,IAAF,CAAO;QACHC,GAAG,EAAC,kDADD;QAEHb,IAAI,EAAC,QAFF;QAGHc,IAAI,EAAC;UACDH;QADC,CAHF;QAOHI,OAAO,EAAC;UACJ,iBAAiB,YAAWT,KAAK,CAACE,KAAN,CAAYL,IAAZ,CAAiBa,MADzC,CACiD;;QADjD,CAPL;;QAUHC,OAAO,CAACC,IAAD,EAAM;UACT,IAAGA,IAAI,CAACC,MAAL,KAAc,SAAjB,EAA2B;YACvB;YACCd,OAAO,CAACe,IAAR,CAAa,eAAb,EAA6BT,OAA7B;UAEL,CALS,CAMT;;QACH,CAjBE;;QAiBDU,KAAK,GAAE,CACL;QACJ;;MAnBG,CAAP;IAyBJ,CA1BA;;IA2BA,OAAO;MACHd,KADG;MAEHG,aAFG,CAGH;;IAHG,CAAP;EAKJ;;AAjEU,CAAd","names":["computed","useStore","$","name","props","posts","type","Object","required","user","setup","context","store","is_me","state","id","delete_a_post","post_id","ajax","url","data","headers","access","success","resp","result","emit","error"],"sourceRoot":"","sources":["C:\\Users\\DELL\\Desktop\\chess\\myspace\\src\\components\\UserProfilePosts.vue"],"sourcesContent":["<template>\r\n    <div class=\"card\" >\r\n        <div class=\"card-body \">\r\n          <div v-for=\"post in posts.posts\" :key=\"post.id\" >\r\n              <div class=\"card single-post \">\r\n                <div class=\"card-body card-color\">\r\n                    {{post.content}}\r\n                    <!--<button @click=\"change_a_post(post.id)\" v-if=\"is_me\" type=\"button\" class=\"btn btn-success btn-sm btn-change\">修改</button>-->\r\n                    <button  v-if=\"is_me\" type=\"button\" class=\"btn btn-success btn-sm btn-change\">修改</button>\r\n                     <button @click=\"delete_a_post(post.id)\" v-if=\"is_me\" type=\"button\" class=\"btn btn-danger btn-delete btn-sm\">删除</button>\r\n                  </div>\r\n              </div>\r\n            \r\n           </div>\r\n        </div>\r\n    </div>\r\n</template>\r\n<script>\r\nimport {computed} from 'vue';\r\nimport {useStore} from 'vuex';\r\nimport $ from 'jquery';\r\n\r\nexport default{\r\n    name:'UserProfilePosts',\r\n    props:{\r\n        posts:{\r\n            type:Object,\r\n            required:true,\r\n    \r\n        },\r\n        user:{\r\n             type:Object,\r\n            required:true,\r\n        },\r\n    },\r\n    setup(props,context){\r\n        const store=useStore();\r\n        let is_me=computed(()=>store.state.user.id===props.user.id);\r\n        /*const change_a_post=(post_id)=>{\r\n            $.ajax({\r\n                url:\"https://app165.acapp.acwing.com.cn/myspace/post/\",\r\n                type:\"PUT\",\r\n                data:{\r\n                    post_id,\r\n                },\r\n                headers:{\r\n                    'Authorization':\"Bearer \" +store.state.user.access,\r\n                },\r\n                success(resp){\r\n                    console.log()\r\n                }\r\n\r\n            });\r\n        }*/\r\n        //删除帖子\r\n        const delete_a_post=(post_id)=>{\r\n            $.ajax({\r\n                url:\"https://app165.acapp.acwing.com.cn/myspace/post/\",\r\n                type:\"DELETE\",\r\n                data:{\r\n                    post_id,\r\n\r\n                },\r\n                headers:{\r\n                    'Authorization': 'Bearer ' +store.state.user.access, //身份验证\r\n                },\r\n                success(resp){\r\n                    if(resp.result===\"success\"){\r\n                        //后端操作成功，则前端显示实现真正删掉\r\n                         context.emit('delete_a_post',post_id);\r\n\r\n                    }\r\n                    //console.log(resp);\r\n                },error(){\r\n                    //console.log(\"failed\");\r\n                }\r\n\r\n\r\n\r\n            });\r\n\r\n        }\r\n        return {\r\n            is_me,\r\n            delete_a_post,\r\n            //change_a_post,\r\n        }\r\n    }\r\n}  \r\n</script>\r\n<style scoped>\r\n.single-post{\r\n    margin-bottom: 10px;\r\n    background-color:lightgreen;\r\n \r\n}\r\n\r\n.btn-delete{\r\n    font-size:12px;\r\n    color:white;\r\n    padding:2px,2px;\r\n    float:right;\r\n\r\n}\r\n.btn-change{\r\n    font-size:12px;\r\n    padding:2px,2px;\r\n    float:right;\r\n}\r\n\r\n/*div.card-color:nth-child(odd){\r\n    background-color:lightcoral;\r\n}\r\ndiv.card-color:nth-child(even){\r\n    background-color:lightblue;\r\n\r\n\r\n}*/\r\n\r\n</style>"]},"metadata":{},"sourceType":"module"}