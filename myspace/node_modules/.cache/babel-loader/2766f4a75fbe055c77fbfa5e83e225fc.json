{"ast":null,"code":"import ContentBase from '../components/ContentBase';\nimport { ref } from 'vue';\nimport { useStore } from 'vuex';\nimport router from '@/router/index';\nimport $ from 'jquery';\nexport default {\n  name: 'RegisterView',\n  components: {\n    ContentBase\n  },\n\n  setup() {\n    const store = useStore();\n    let username = ref('');\n    let password = ref('');\n    let password_confirm = ref('');\n    let error_message = ref('');\n\n    const register = () => {\n      error_message.value = \"\";\n      console.log(store, router); //console.log(username.value,password.value,password_confirm.value);\n\n      $.ajax({\n        url: \"https://app165.acapp.acwing.com.cn/myspace/user/\",\n        type: \"POST\",\n        data: {\n          username: username.value,\n          password: password.value,\n          password_confirm: password_confirm.value\n        },\n\n        success(resp) {\n          // console.log(resp);\n          //注册成功之后可以直接登录\n          if (resp.result === \"success\") {\n            store.dispatch(\"login\", {\n              username: username.value,\n              password: password.value,\n\n              success() {\n                //console.log(\"success\");\n                router.push({\n                  name: 'userlist'\n                });\n              },\n\n              error() {\n                //console.log(\"failed\");\n                error_message.value = \"系统异常，请稍后重试\";\n              }\n\n            });\n          } else {\n            error_message.value = resp.result; //注册失败才显示信息\n          }\n        },\n\n        error() {//error_message.value=resp;\n        }\n\n      });\n    };\n\n    return {\n      username,\n      password,\n      password_confirm,\n      error_message,\n      register\n    };\n  }\n\n};","map":{"version":3,"mappings":"AA8BA,OAAOA,WAAP,MAAwB,2BAAxB;AACA,SAASC,GAAT,QAAmB,KAAnB;AACA,SAASC,QAAT,QAAyB,MAAzB;AACA,OAAOC,MAAP,MAAmB,gBAAnB;AACA,OAAOC,CAAP,MAAc,QAAd;AAGA,eAAe;EACbC,IAAI,EAAE,cADO;EAEbC,UAAU,EAAE;IACVN;EADU,CAFC;;EAKbO,KAAK,GAAE;IAEL,MAAMC,KAAK,GAACN,QAAQ,EAApB;IACA,IAAIO,QAAQ,GAACR,GAAG,CAAC,EAAD,CAAhB;IACA,IAAIS,QAAQ,GAACT,GAAG,CAAC,EAAD,CAAhB;IACA,IAAIU,gBAAgB,GAACV,GAAG,CAAC,EAAD,CAAxB;IACA,IAAIW,aAAa,GAACX,GAAG,CAAC,EAAD,CAArB;;IACA,MAAMY,QAAO,GAAG,MAAI;MAClBD,aAAa,CAACE,KAAd,GAAoB,EAApB;MACAC,OAAO,CAACC,GAAR,CAAYR,KAAZ,EAAkBL,MAAlB,EAFkB,CAGlB;;MACAC,CAAC,CAACa,IAAF,CAAO;QACLC,GAAG,EAAC,kDADC;QAELC,IAAI,EAAC,MAFA;QAGLC,IAAI,EAAC;UACHX,QAAQ,EAACA,QAAQ,CAACK,KADf;UAEHJ,QAAQ,EAACA,QAAQ,CAACI,KAFf;UAGHH,gBAAgB,EAACA,gBAAgB,CAACG;QAH/B,CAHA;;QASLO,OAAO,CAACC,IAAD,EAAM;UACZ;UAEC;UACA,IAAGA,IAAI,CAACC,MAAL,KAAc,SAAjB,EAA2B;YACxBf,KAAK,CAACgB,QAAN,CAAe,OAAf,EAAuB;cACvBf,QAAQ,EAACA,QAAQ,CAACK,KADK;cAEvBJ,QAAQ,EAACA,QAAQ,CAACI,KAFK;;cAGxBO,OAAO,GAAE;gBACP;gBACAlB,MAAM,CAACsB,IAAP,CAAY;kBAACpB,IAAI,EAAC;gBAAN,CAAZ;cACD,CANuB;;cAMtBqB,KAAK,GAAE;gBACP;gBACAd,aAAa,CAACE,KAAd,GAAoB,YAApB;cACD;;YATuB,CAAvB;UAYF,CAbD,MAaK;YACFF,aAAa,CAACE,KAAd,GAAoBQ,IAAI,CAACC,MAAzB,CADE,CAC8B;UACnC;QAED,CA9BI;;QA8BHG,KAAK,GAAE,CACP;QACF;;MAhCK,CAAP;IAoCD,CAxCD;;IA0CA,OAAM;MACJjB,QADI;MAEJC,QAFI;MAGJC,gBAHI;MAIJC,aAJI;MAKJC;IALI,CAAN;EAOF;;AA7Da,CAAf","names":["ContentBase","ref","useStore","router","$","name","components","setup","store","username","password","password_confirm","error_message","register","value","console","log","ajax","url","type","data","success","resp","result","dispatch","push","error"],"sourceRoot":"","sources":["C:\\Users\\DELL\\Desktop\\chess\\myspace\\src\\views\\RegisterView.vue"],"sourcesContent":["<template>\r\n \r\n<ContentBase>\r\n  <div class=\"row justify-content-md-center\">\r\n    <div class=\"col-3\">\r\n      <form @submit.prevent=\"register\">\r\n  <div class=\"mb-3\">\r\n    <label for=\"username\" class=\"form-label\">用户名</label>\r\n    <input v-model=\"username\" type=\"text\" class=\"form-control\" id=\"username\">\r\n  </div>\r\n  <div class=\"mb-3\">\r\n    <label for=\"password\" class=\"form-label\">密码</label>\r\n    <input v-model=\"password\" type=\"password\" class=\"form-control\" id=\"password\">\r\n  </div>\r\n  <div class=\"mb-3\">\r\n    <label for=\"password_confirm\" class=\"form-label\">确认密码</label>\r\n    <input v-model=\"password_confirm\" type=\"password\" class=\"form-control\" id=\"password_confirm\">\r\n  </div>\r\n  <div class=\"error-message\">{{error_message}}</div>\r\n  <button type=\"submit\" class=\"btn btn-primary\">注册</button>\r\n</form>\r\n    </div>\r\n  </div>\r\n\r\n</ContentBase>\r\n\r\n</template>\r\n\r\n<script>\r\n\r\nimport ContentBase from '../components/ContentBase';\r\nimport { ref} from 'vue';\r\nimport { useStore } from 'vuex';\r\nimport router from '@/router/index';\r\nimport $ from 'jquery';\r\n\r\n\r\nexport default {\r\n  name: 'RegisterView',\r\n  components: {\r\n    ContentBase,\r\n  },\r\n  setup(){\r\n\r\n    const store=useStore();\r\n    let username=ref('');\r\n    let password=ref('');\r\n    let password_confirm=ref('')\r\n    let error_message=ref('');\r\n    const register =()=>{\r\n      error_message.value=\"\";\r\n      console.log(store,router);\r\n      //console.log(username.value,password.value,password_confirm.value);\r\n      $.ajax({\r\n        url:\"https://app165.acapp.acwing.com.cn/myspace/user/\",\r\n        type:\"POST\",\r\n        data:{\r\n          username:username.value,\r\n          password:password.value,\r\n          password_confirm:password_confirm.value,\r\n\r\n        },\r\n        success(resp){\r\n         // console.log(resp);\r\n         \r\n          //注册成功之后可以直接登录\r\n          if(resp.result===\"success\"){\r\n             store.dispatch(\"login\",{\r\n             username:username.value,\r\n             password:password.value,\r\n            success(){\r\n              //console.log(\"success\");\r\n              router.push({name:'userlist'});\r\n            },error(){\r\n              //console.log(\"failed\");\r\n              error_message.value=\"系统异常，请稍后重试\";\r\n             }\r\n          });\r\n\r\n          }else{\r\n             error_message.value=resp.result;//注册失败才显示信息\r\n          }\r\n          \r\n        },error(){\r\n          //error_message.value=resp;\r\n        }\r\n\r\n      });\r\n   \r\n    };\r\n    \r\n    return{\r\n      username,\r\n      password,\r\n      password_confirm,\r\n      error_message,\r\n      register,\r\n    }\r\n  }\r\n\r\n}\r\n</script>\r\n<style scoped>\r\nbutton{\r\n  width:100%\r\n}\r\n.error-message{\r\n  color:red;\r\n  font-size:17px;\r\n  padding:2px,2px;\r\n}\r\n</style>"]},"metadata":{},"sourceType":"module"}