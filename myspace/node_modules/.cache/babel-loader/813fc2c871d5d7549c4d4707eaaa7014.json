{"ast":null,"code":"import { renderList as _renderList, Fragment as _Fragment, openBlock as _openBlock, createElementBlock as _createElementBlock, toDisplayString as _toDisplayString, createCommentVNode as _createCommentVNode, createTextVNode as _createTextVNode, createElementVNode as _createElementVNode, pushScopeId as _pushScopeId, popScopeId as _popScopeId } from \"vue\";\n\nconst _withScopeId = n => (_pushScopeId(\"data-v-b9741d74\"), n = n(), _popScopeId(), n);\n\nconst _hoisted_1 = {\n  class: \"card\"\n};\nconst _hoisted_2 = {\n  class: \"card-body\"\n};\nconst _hoisted_3 = {\n  class: \"card single-post\"\n};\nconst _hoisted_4 = {\n  class: \"card-body card-color\"\n};\nconst _hoisted_5 = {\n  key: 0,\n  type: \"button\",\n  class: \"btn btn-success btn-sm btn-change\"\n};\nconst _hoisted_6 = [\"onClick\"];\nexport function render(_ctx, _cache, $props, $setup, $data, $options) {\n  return _openBlock(), _createElementBlock(\"div\", _hoisted_1, [_createElementVNode(\"div\", _hoisted_2, [(_openBlock(true), _createElementBlock(_Fragment, null, _renderList($props.posts.posts, post => {\n    return _openBlock(), _createElementBlock(\"div\", {\n      key: post.id\n    }, [_createElementVNode(\"div\", _hoisted_3, [_createElementVNode(\"div\", _hoisted_4, [_createTextVNode(_toDisplayString(post.content), 1), $setup.is_me ? (_openBlock(), _createElementBlock(\"button\", _hoisted_5, \"修改\")) : _createCommentVNode(\"\", true), $setup.is_me ? (_openBlock(), _createElementBlock(\"button\", {\n      key: 1,\n      onClick: $event => $setup.delete_a_post(post.id),\n      type: \"button\",\n      class: \"btn btn-danger btn-delete btn-sm\"\n    }, \"删除\", 8, _hoisted_6)) : _createCommentVNode(\"\", true)])])]);\n  }), 128))])]);\n}","map":{"version":3,"mappings":";;;;;EACSA,KAAK,EAAC;;;EACFA,KAAK,EAAC;;;EAEAA,KAAK,EAAC;;;EACJA,KAAK,EAAC;;;;EAGeC,IAAI,EAAC;EAASD,KAAK,EAAC;;;;uBAP1DE,oBAcM,KAdN,cAcM,CAbFC,oBAYM,KAZN,cAYM,oBAXJD,oBAUOE,SAVP,EAUO,IAVP,EAUOC,YAVaC,aAAMC,KAUnB,EAVKC,IAAmB,IAAf;yBAAhBN,oBAUO,KAVP,EAUO;MAV2BO,GAAG,EAAED,IAAI,CAACE;IAUrC,CAVP,GACIP,oBAOM,KAPN,cAOM,CANJA,oBAKQ,KALR,cAKQ,mCAJFK,IAAI,CAACG,UAAO,EAIV,EAFWC,8BAAfV,oBAAyF,QAAzF,cAA8E,IAA9E,kCAEI,EAD2CU,8BAA9CV,oBAAuH,QAAvH,EAAuH;YAAA;MAA9GW,OAAK,YAAED,qBAAcJ,IAAI,CAACE,EAAnB,CAAuG;MAAlET,IAAI,EAAC,QAA6D;MAApDD,KAAK,EAAC;IAA8C,CAAvH,EAA4G,IAA5G,EAA8G,CAA9G,EAA8Gc,UAA9G,kCACG,CALR,CAMI,CAPN,EADJ;GAUO,CAVP,MAWI,EAZN,CAaE,CAdN","names":["class","type","_createElementBlock","_createElementVNode","_Fragment","_renderList","$props","posts","post","key","id","content","$setup","onClick","_hoisted_6"],"sourceRoot":"","sources":["C:\\Users\\DELL\\Desktop\\chess\\myspace\\src\\components\\UserProfilePosts.vue"],"sourcesContent":["<template>\r\n    <div class=\"card\" >\r\n        <div class=\"card-body \">\r\n          <div v-for=\"post in posts.posts\" :key=\"post.id\" >\r\n              <div class=\"card single-post \">\r\n                <div class=\"card-body card-color\">\r\n                    {{post.content}}\r\n                    <!--<button @click=\"change_a_post(post.id)\" v-if=\"is_me\" type=\"button\" class=\"btn btn-success btn-sm btn-change\">修改</button>-->\r\n                    <button  v-if=\"is_me\" type=\"button\" class=\"btn btn-success btn-sm btn-change\">修改</button>\r\n                     <button @click=\"delete_a_post(post.id)\" v-if=\"is_me\" type=\"button\" class=\"btn btn-danger btn-delete btn-sm\">删除</button>\r\n                  </div>\r\n              </div>\r\n            \r\n           </div>\r\n        </div>\r\n    </div>\r\n</template>\r\n<script>\r\nimport {computed} from 'vue';\r\nimport {useStore} from 'vuex';\r\nimport $ from 'jquery';\r\n\r\nexport default{\r\n    name:'UserProfilePosts',\r\n    props:{\r\n        posts:{\r\n            type:Object,\r\n            required:true,\r\n    \r\n        },\r\n        user:{\r\n             type:Object,\r\n            required:true,\r\n        },\r\n    },\r\n    setup(props,context){\r\n        const store=useStore();\r\n        let is_me=computed(()=>store.state.user.id===props.user.id);\r\n        /*const change_a_post=(post_id)=>{\r\n            $.ajax({\r\n                url:\"https://app165.acapp.acwing.com.cn/myspace/post/\",\r\n                type:\"PUT\",\r\n                data:{\r\n                    post_id,\r\n                },\r\n                headers:{\r\n                    'Authorization':\"Bearer \" +store.state.user.access,\r\n                },\r\n                success(resp){\r\n                    console.log()\r\n                }\r\n\r\n            });\r\n        }*/\r\n        //删除帖子\r\n        const delete_a_post=(post_id)=>{\r\n            $.ajax({\r\n                url:\"https://app165.acapp.acwing.com.cn/myspace/post/\",\r\n                type:\"DELETE\",\r\n                data:{\r\n                    post_id,\r\n\r\n                },\r\n                headers:{\r\n                    'Authorization': 'Bearer ' +store.state.user.access, //身份验证\r\n                },\r\n                success(resp){\r\n                    if(resp.result===\"success\"){\r\n                        //后端操作成功，则前端显示实现真正删掉\r\n                         context.emit('delete_a_post',post_id);\r\n\r\n                    }\r\n                    //console.log(resp);\r\n                },error(){\r\n                    //console.log(\"failed\");\r\n                }\r\n\r\n\r\n\r\n            });\r\n\r\n        }\r\n        return {\r\n            is_me,\r\n            delete_a_post,\r\n            //change_a_post,\r\n        }\r\n    }\r\n}  \r\n</script>\r\n<style scoped>\r\n.single-post{\r\n    margin-bottom: 10px;\r\n    background-color:lightgreen;\r\n \r\n}\r\n\r\n.btn-delete{\r\n    font-size:12px;\r\n    color:white;\r\n    padding:2px,2px;\r\n    float:right;\r\n\r\n}\r\n.btn-change{\r\n    font-size:12px;\r\n    padding:2px,2px;\r\n    float:right;\r\n}\r\n\r\n/*div.card-color:nth-child(odd){\r\n    background-color:lightcoral;\r\n}\r\ndiv.card-color:nth-child(even){\r\n    background-color:lightblue;\r\n\r\n\r\n}*/\r\n\r\n</style>"]},"metadata":{},"sourceType":"module"}