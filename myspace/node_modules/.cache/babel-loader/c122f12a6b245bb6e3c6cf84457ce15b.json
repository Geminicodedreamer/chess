{"ast":null,"code":"//import {computed} from 'vue';\nimport $ from 'jquery';\nimport { useStore } from 'vuex';\nexport default {\n  name: 'UserProfileInfo',\n  props: {\n    user: {\n      type: Object,\n      required: true\n    }\n  },\n\n  setup(props, context) {\n    const store = useStore(); //let fullName=computed(()=>props.user.lastName+' '+props.user.firstName);\n\n    const follow = () => {\n      //更新数据库状态\n      $.ajax({\n        url: \"https://app165.acapp.acwing.com.cn/myspace/follow/\",\n        type: \"POST\",\n        data: {\n          target_id: props.user.id //当前用户id\n\n        },\n        headers: {\n          //Authorication,//身份验证\n          'Authorization': 'Bearer ' + store.state.user.access //授权\n\n        },\n\n        success(resp) {\n          if (resp.result === \"success\") {\n            //授权成功之后则在前端渲染\n            // console.log(\"follow\",resp);\n            context.emit(\"follow\");\n          }\n        }\n\n      });\n    };\n\n    const unfollow = () => {\n      //更新数据库状态\n      $.ajax({\n        url: \"https://app165.acapp.acwing.com.cn/myspace/follow/\",\n        type: \"POST\",\n        data: {\n          target_id: props.user.id //当前用户id\n\n        },\n        headers: {\n          //Authorization,身份验证\n          'Authorization': 'Bearer ' + store.state.user.access //授权\n\n        },\n\n        success(resp) {\n          //授权成功之后则在前端渲染\n          if (resp.result === \"success\") {\n            //console.log(\"unfollow\",resp);\n            context.emit(\"unfollow\");\n          }\n        }\n\n      });\n    };\n\n    return {\n      // fullName,\n      follow,\n      unfollow\n    };\n  }\n\n};","map":{"version":3,"mappings":"AAsBA;AAEA,OAAOA,CAAP,MAAc,QAAd;AACA,SAASC,QAAT,QAAyB,MAAzB;AAEA,eAAc;EACVC,IAAI,EAAC,iBADK;EAEVC,KAAK,EAAC;IACFC,IAAI,EAAC;MACDC,IAAI,EAACC,MADJ;MAEDC,QAAQ,EAAC;IAFR;EADH,CAFI;;EAQVC,KAAK,CAACL,KAAD,EAAOM,OAAP,EAAe;IAChB,MAAMC,KAAK,GAACT,QAAQ,EAApB,CADgB,CAEhB;;IACA,MAAMU,MAAK,GAAG,MAAI;MACd;MACAX,CAAC,CAACY,IAAF,CAAO;QACHC,GAAG,EAAC,oDADD;QAEHR,IAAI,EAAC,MAFF;QAGHS,IAAI,EAAC;UACDC,SAAS,EAACZ,KAAK,CAACC,IAAN,CAAWY,EADpB,CACuB;;QADvB,CAHF;QAOHC,OAAO,EAAC;UACJ;UACA,iBAAiB,YAAYP,KAAK,CAACQ,KAAN,CAAYd,IAAZ,CAAiBe,MAF1C,CAEkD;;QAFlD,CAPL;;QAYHC,OAAO,CAACC,IAAD,EAAM;UACX,IAAGA,IAAI,CAACC,MAAL,KAAc,SAAjB,EAA2B;YACvB;YACJ;YACCb,OAAO,CAACc,IAAR,CAAa,QAAb;UAED;QAIF;;MAtBG,CAAP;IA0BH,CA5BD;;IA6BA,MAAMC,QAAO,GAAG,MAAI;MACf;MACDxB,CAAC,CAACY,IAAF,CAAO;QACHC,GAAG,EAAC,oDADD;QAEHR,IAAI,EAAC,MAFF;QAGHS,IAAI,EAAC;UACDC,SAAS,EAACZ,KAAK,CAACC,IAAN,CAAWY,EADpB,CACuB;;QADvB,CAHF;QAOHC,OAAO,EAAC;UACJ;UACA,iBAAiB,YAAYP,KAAK,CAACQ,KAAN,CAAYd,IAAZ,CAAiBe,MAF1C,CAEkD;;QAFlD,CAPL;;QAYHC,OAAO,CAACC,IAAD,EAAM;UACT;UACA,IAAGA,IAAI,CAACC,MAAL,KAAc,SAAjB,EAA2B;YACvB;YACAb,OAAO,CAACc,IAAR,CAAa,UAAb;UAEJ;QAIJ;;MAtBG,CAAP;IA4BH,CA9BD;;IA+BA,OAAO;MACJ;MACCZ,MAFG;MAGHa;IAHG,CAAP;EAMJ;;AA7EU,CAAd","names":["$","useStore","name","props","user","type","Object","required","setup","context","store","follow","ajax","url","data","target_id","id","headers","state","access","success","resp","result","emit","unfollow"],"sourceRoot":"","sources":["C:\\Users\\DELL\\Desktop\\chess\\myspace\\src\\components\\UserProfileInfo.vue"],"sourcesContent":["<template>\r\n<div class=\"card\">\r\n    <div class=\"card-body\">\r\n        <div class=\"row\">\r\n        <div class=\"col-3 img-field\">\r\n            <img class=\"img-fluid\" :src=\"user.photo\" alt=\"\">\r\n        </div>\r\n        <div class=\"col-9\">\r\n            <div class=\"username\">{{user.username}}</div>\r\n            <div class=\"fans,fw-lighter\">粉丝数:{{user.followerCount}}</div>\r\n            <div >\r\n                    <button @click=\"follow\" v-if=\"!user.is_followed\" type=\"button\" class=\"btn btn-primary btn-sm\">+监督</button>\r\n                    <button @click=\"unfollow\" v-if=\"user.is_followed\" type=\"button\" class=\"btn btn-primary btn-sm\">取消监督</button>\r\n                    <button type=\"button\" class=\"btn btn-danger btn-sm\">发消息</button>\r\n            </div>\r\n        </div>\r\n    </div>\r\n    </div>\r\n</div>\r\n    \r\n</template>\r\n<script>\r\n//import {computed} from 'vue';\r\n\r\nimport $ from 'jquery';\r\nimport { useStore } from 'vuex';\r\n\r\nexport default{\r\n    name:'UserProfileInfo',\r\n    props:{\r\n        user:{\r\n            type:Object,\r\n            required:true,\r\n        },\r\n    },\r\n    setup(props,context){\r\n        const store=useStore();\r\n        //let fullName=computed(()=>props.user.lastName+' '+props.user.firstName);\r\n        const follow =()=>{\r\n            //更新数据库状态\r\n            $.ajax({\r\n                url:\"https://app165.acapp.acwing.com.cn/myspace/follow/\",\r\n                type:\"POST\",\r\n                data:{\r\n                    target_id:props.user.id,//当前用户id\r\n\r\n                },\r\n                headers:{\r\n                    //Authorication,//身份验证\r\n                    'Authorization': 'Bearer ' + store.state.user.access, //授权\r\n\r\n                },\r\n                success(resp){\r\n                  if(resp.result===\"success\"){\r\n                      //授权成功之后则在前端渲染\r\n                  // console.log(\"follow\",resp);\r\n                   context.emit(\"follow\");\r\n\r\n                  }\r\n                  \r\n\r\n                    \r\n                }\r\n\r\n            });\r\n\r\n        };\r\n        const unfollow =()=>{\r\n             //更新数据库状态\r\n            $.ajax({\r\n                url:\"https://app165.acapp.acwing.com.cn/myspace/follow/\",\r\n                type:\"POST\",\r\n                data:{\r\n                    target_id:props.user.id,//当前用户id\r\n\r\n                },\r\n                headers:{\r\n                    //Authorization,身份验证\r\n                    'Authorization': 'Bearer ' + store.state.user.access, //授权\r\n\r\n                },\r\n                success(resp){\r\n                    //授权成功之后则在前端渲染\r\n                    if(resp.result===\"success\"){\r\n                        //console.log(\"unfollow\",resp);\r\n                        context.emit(\"unfollow\");\r\n\r\n                    }\r\n                     \r\n\r\n                    \r\n                }\r\n\r\n            });\r\n\r\n        \r\n\r\n        };\r\n        return {\r\n           // fullName,\r\n            follow,\r\n            unfollow,\r\n        }\r\n\r\n    }\r\n}\r\n</script>\r\n<style scoped>\r\nimg{\r\n  border-radius: 50%;\r\n  /*width:30px;\r\n  height:50px;*/\r\n}\r\n.username{\r\n    font-weight:bold;\r\n    font-size:15px;\r\n\r\n}\r\n.fans{\r\n    font-size:12px;\r\n    color:grey;\r\n}\r\nbutton{\r\n    padding:2px,4px;\r\n    font-size:12px;    \r\n}\r\n.card-body{\r\n    background-color: lightblue;\r\n    padding:2px,4px;\r\n    font-size:12px;\r\n\r\n}\r\n.img-field{\r\n    display:flex;\r\n    flex-direction:column;\r\n    justify-content: center;\r\n\r\n\r\n}\r\n\r\n</style>"]},"metadata":{},"sourceType":"module"}